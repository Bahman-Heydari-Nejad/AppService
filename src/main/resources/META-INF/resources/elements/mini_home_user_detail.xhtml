<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui" xmlns:f="http://xmlns.jcp.org/jsf/core"
>

    <style>
        .accountAvatar {
            float: left;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            margin-right: 10px;
            margin-top: -3px;
        }
    </style>
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        <p:graphicImage id="NAVBAR_SESSION_AVATAR"
                        value="#{documentStreamer.imageStream()}"
                        styleClass="accountAvatar"
        >
            <f:param name="#{documentStreamer.documentRequestId}"
                     value="#{sessionBean.account.avatar != null?sessionBean.account.avatar.id:''}"/>
        </p:graphicImage>
        <span class="">#{sessionBean.account.accountName}</span>
    </a>

    <ul class="dropdown-menu">
        <li class="user-header">
            <div>
                <p:commandLink title="Update Avatar"
                               onclick="PF('UPDATE_SESSION_AVATAR_DIALOG').show()"
                               data-toggle="control-sidebar"
                >
                    <p:graphicImage id="SESSION_AVATAR_MEDIUM"
                                    value="#{documentStreamer.imageStream()}"
                                    styleClass="accountAvatar" style="width:100px; height: 100px"
                    >
                        <f:param name="#{documentStreamer.documentRequestId}"
                                 value="#{sessionBean.account.avatar != null?sessionBean.account.avatar.id:''}"/>
                    </p:graphicImage>
                </p:commandLink>
            </div>
            <p>
                #{sessionBean.account.accountName}
                <small>#{sessionBean.account.displayName}</small>
            </p>
        </li>
        <li class="user-footer">
            <h:form prependId="false">
                <div class="pull-left">
                    <p:commandLink title="Account Settings"
                                   onclick="PF('SETTING_DIALOG').show()"
                                   data-toggle="control-sidebar"
                                   class="fa fa-gear fa-2x"
                    >
                    </p:commandLink>
                </div>
                <div class="pull-right">
                    <p:link href="/signout" id="signout" class="fa fa-sign-out fa-2x"></p:link>
                </div>
            </h:form>
        </li>
    </ul>

    <ui:fragment>
        <ui:include src="modal_settings.xhtml"></ui:include>
    </ui:fragment>

    <ui:fragment>
        <ui:include src="update_session_avatar_modal.xhtml"></ui:include>
    </ui:fragment>

</ui:composition>