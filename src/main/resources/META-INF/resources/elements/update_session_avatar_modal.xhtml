<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core"
>

    <p:dialog header="Avatar"
              widgetVar="UPDATE_SESSION_AVATAR_DIALOG"
              modal="true"
              minWidth="500" resizable="false"
              appendTo="@(body)"
    >

        <h:form prependId="false">
            <p:graphicImage id="DIALOG_SESSION_AVATAR"
                            value="#{documentStreamer.imageStream()}"
                            styleClass="accountAvatar"
                            style="width:400px; height: 400px"
            >
                <f:param name="#{documentStreamer.documentRequestId}"
                         value="#{sessionBean.account.avatar != null?sessionBean.account.avatar.id:''}"/>
            </p:graphicImage>

            <p:fileUpload id="SESSION_AVATAR_UPLOAD"
                          fileUploadListener="#{sessionBean.uploadAvatar}" mode="advanced"
                          dragDropSupport="true" auto="false" onstart="showBar()"
                          oncomplete="hideBar()"
                          multiple="true"
                          update="@form, NAVBAR_SESSION_AVATAR, SESSION_AVATAR_MEDIUM"
                          sizeLimit="1000000" fileLimit="3"
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
            />
            <p:message for="@previous" showDetail="false"/>
        </h:form>

    </p:dialog>
</ui:composition>