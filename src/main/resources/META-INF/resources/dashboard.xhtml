<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="#{layoutMB.template}"
>
    <f:metadata>
        <f:event type="preRenderView" listener="#{sessionBean.redirectAnonymousUsers}"/>
    </f:metadata>

    <ui:define name="head">
        <p:growl id="MESSAGE_BOX" showDetail="true" sticky="false" life="5000" autoUpdate="true"/>
        <!--        <p:ajaxExceptionHandler id="exception" type="java.lang.Throwable"-->
        <!--                                update="MESSAGE_BOX"-->
        <!--                                onexception=""-->
        <!--        />-->
        <title>#{environment.getProperty('app.name')}</title>

    </ui:define>

    <ui:define name="logo-lg">
        #{environment.getProperty('app.name')}
    </ui:define>

    <ui:define name="logo-mini">
        #{environment.getProperty('app.name').split(' ')[0]}
    </ui:define>

    <ui:define name="top-menu">
        <ui:fragment id="top_navbar">
            <ui:include src="/elements/top_bar.xhtml"/>
        </ui:fragment>
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/elements/sidebar_menu.xhtml"></ui:include>
    </ui:define>

    <ui:define name="body">
        <p:panel id="PANEL_CONTAINER"
                 header="#{panelHandler.activePanel.displayName}"
                 toggleable="true"
                 closable="false"
                 toggleSpeed="300"
                 styleClass="box-success box-solid"
        >
            <ui:include src="#{panelHandler.activePanel.resourceLocation}">
                <ui:param name="activePanel" value="#{panelHandler.activePanel}"></ui:param>
            </ui:include>
        </p:panel>
    </ui:define>

    <ui:define name="footer">
        <a target="_blank"
           href="#{environment.getProperty('app.company.page')}">
            #{environment.getProperty('app.company.desc')}
        </a>
        <div class="pull-right hidden-xs" style="color: gray">
            <i>#{environment.getProperty('app.version')}</i>
        </div>
    </ui:define>
</ui:composition>